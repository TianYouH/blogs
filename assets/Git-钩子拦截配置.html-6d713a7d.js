import{_ as t,M as i,p as l,q as o,R as n,t as a,N as e,a1 as c}from"./framework-8fa3e4ce.js";const p={},r=c(`<h1 id="git-é’©å­æ‹¦æˆªé…ç½®" tabindex="-1"><a class="header-anchor" href="#git-é’©å­æ‹¦æˆªé…ç½®" aria-hidden="true">#</a> Git-é’©å­æ‹¦æˆªé…ç½®</h1><h2 id="æµ‹è¯•ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•ç¯å¢ƒ" aria-hidden="true">#</a> æµ‹è¯•ç¯å¢ƒ</h2><pre><code>windows7&gt;vscode&gt;webpack@4.x
</code></pre><h2 id="ç›¸å…³ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³ä¾èµ–" aria-hidden="true">#</a> ç›¸å…³ä¾èµ–</h2><pre><code>&quot;husky&quot;: &quot;^7.0.4&quot;
    huskyå¯ä»¥è®©æˆ‘ä»¬å‘é¡¹ç›®ä¸­æ–¹ä¾¿æ·»åŠ git hooks
&quot;lint-staged&quot;: &quot;^12.1.2&quot;
    åœ¨ä»£ç æäº¤ä¹‹å‰ï¼Œè¿›è¡Œä»£ç è§„åˆ™æ£€æŸ¥èƒ½å¤Ÿç¡®ä¿è¿›å…¥gitåº“çš„ä»£ç éƒ½æ˜¯ç¬¦åˆä»£ç è§„åˆ™çš„ã€‚
    ä½†æ˜¯æ•´ä¸ªé¡¹ç›®ä¸Šè¿è¡Œlinté€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œlint-stagedèƒ½å¤Ÿè®©lintåªæ£€æµ‹æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œæ‰€ä»¥é€Ÿåº¦å¾ˆå¿«ã€‚
&quot;@commitlint/cli&quot;: &quot;^15.0.0&quot;
&quot;@commitlint/config-conventional&quot;: &quot;^15.0.0&quot;
    ç”¨äºæ£€æŸ¥é¡¹ç›®çš„ Commit message æ˜¯å¦ç¬¦åˆæ ¼å¼ï¼ˆé‡‡ç”¨é»˜è®¤ï¼‰ã€‚
</code></pre><h2 id="å®‰è£…" tabindex="-1"><a class="header-anchor" href="#å®‰è£…" aria-hidden="true">#</a> å®‰è£…</h2><pre><code>\`npm i husky lint-staged @commitlint/cli @commitlint/config-conventional -D\`
</code></pre><h2 id="ç›¸å…³é…ç½®è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ç›¸å…³é…ç½®è¯´æ˜" aria-hidden="true">#</a> ç›¸å…³é…ç½®è¯´æ˜</h2><h3 id="lint-staged" tabindex="-1"><a class="header-anchor" href="#lint-staged" aria-hidden="true">#</a> lint-staged</h3><p>é…ç½®æ–‡ä»¶ æ·»åŠ åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ æ ¹æ®å®é™…éªŒè¯æƒ…å†µè°ƒæ•´é…ç½®</p><p>lint-staged.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&#39;*.(js|vue)&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;eslint --fix --cache&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;prettier  --write&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&#39;*.(vue|htm|html|css|less|sass|scss|styl|stylus|md|js)&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// &#39;stylelint --fix --cache&#39;,</span>
    <span class="token string">&#39;prettier  --write&#39;</span>
  <span class="token punctuation">]</span>
  <span class="token comment">// &#39;*.(htm|html)&#39;: [&#39;htmlhint&#39;, &#39;prettier  --write&#39;]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="commitlint" tabindex="-1"><a class="header-anchor" href="#commitlint" aria-hidden="true">#</a> commitlint</h3><p>é…ç½®</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]}&quot;</span> <span class="token operator">&gt;</span> commitlint.config.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æµ‹è¯•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&#39;foo: bar&#39;</span> <span class="token operator">|</span> commitlint
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>å¦‚æœé‡è§<code>command not found: commitlint</code>é”™è¯¯ï¼Œå¯ä»¥å°è¯•æ”¹ä¸º<code>npx commitlint</code></p></blockquote><h3 id="husky" tabindex="-1"><a class="header-anchor" href="#husky" aria-hidden="true">#</a> husky</h3><ol><li>åœ¨packgae.jsonä¸­æ·»åŠ prepareè„šæœ¬</li></ol><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// prepareè„šæœ¬ä¼šåœ¨npm installï¼ˆä¸å¸¦å‚æ•°ï¼‰ä¹‹åè‡ªåŠ¨æ‰§è¡Œã€‚</span>
<span class="token comment">// ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬æ‰§è¡Œnpm installå®‰è£…å®Œé¡¹ç›®ä¾èµ–åä¼šæ‰§è¡Œ husky installå‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šåˆ›å»º.husky/ç›®å½•å¹¶æŒ‡å®šè¯¥ç›®å½•ä¸ºgit hooksæ‰€åœ¨çš„ç›®å½•ã€‚</span>
<span class="token comment">// å¦‚æœ æ— éœ€æ‰§è¡Œnpm installï¼Œè¯·æ‰‹åŠ¨æ‰§è¡Œnpm run prepareå‘½ä»¤ï¼Œå®Œæˆé’©å­é…ç½®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>æ·»åŠ git hooksï¼Œè¿è¡Œä¸€ä¸‹å‘½ä»¤åˆ›å»ºgit hooks</li></ol><p><code>npx husky add .husky/pre-commit &quot;npx lint-staged&quot;</code></p><p>è¿è¡Œå®Œè¯¥å‘½ä»¤åæˆ‘ä»¬ä¼šçœ‹åˆ°.husky/ç›®å½•ä¸‹æ–°å¢äº†ä¸€ä¸ªåä¸ºpre-commitçš„shellè„šæœ¬ã€‚ ä¹Ÿå°±æ˜¯è¯´åœ¨åœ¨æ‰§è¡Œgit commitå‘½ä»¤æ—¶ä¼šå…ˆæ‰§è¡Œpre-commitè¿™ä¸ªè„šæœ¬ã€‚pre-commitè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

npx lint-staged
<span class="token comment"># ä¾èµ– lint-staged åº“</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°è¯¥è„šæœ¬çš„åŠŸèƒ½å°±æ˜¯æ‰§è¡Œnpx lint-stagedè¿™ä¸ªå‘½ä»¤</p><ol start="3"><li>æ·»åŠ  commit-msg éªŒè¯é’©å­</li></ol><p><code>npx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;</code></p><p>è¿è¡Œå®Œè¯¥å‘½ä»¤åæˆ‘ä»¬ä¼šçœ‹åˆ°.husky/ç›®å½•ä¸‹æ–°å¢äº†ä¸€ä¸ªåä¸ºcommit-msgçš„shellè„šæœ¬ï¼ˆå¦‚æœæ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´åœ¨åœ¨æ‰§è¡Œgit commitå‘½ä»¤æ—¶ä¼šå…ˆæ‰§è¡Œpre-commitè¿™ä¸ªè„šæœ¬ã€‚pre-commitè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">.</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/_/husky.sh&quot;</span>

npx --no-install commitlint <span class="token parameter variable">--edit</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span>
<span class="token comment"># ä¾èµ– commitlint ç›¸å…³åº“</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æäº¤çš„æ—¶å€™ä¼šä¾æ®é…ç½®é’©å­ï¼ŒéªŒè¯ä»£ç è§„èŒƒåŠæäº¤æ ¼å¼ï¼›</p><ol start="4"><li>ç”Ÿæˆç›®å½•æ ¼å¼å‚è€ƒ</li></ol><ul><li>.husky ğŸ“ <ul><li>_ ğŸ“ <ul><li>.gitignore ğŸ“„</li><li>husky.sh ğŸ“„</li></ul></li><li>commit-msg ğŸ“„</li><li>pre-commit ğŸ“„</li></ul></li></ul>`,33),d=n("p",null,"å‚è€ƒèµ„æ–™ï¼š",-1),u={href:"https://typicode.github.io/husky/#/?id=features",target:"_blank",rel:"noopener noreferrer"},m={href:"https://zhuanlan.zhihu.com/p/366786798",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.npmjs.com/package/lint-staged",target:"_blank",rel:"noopener noreferrer"};function v(k,b){const s=i("ExternalLinkIcon");return l(),o("div",null,[r,n("blockquote",null,[d,n("p",null,[n("a",u,[a("husky"),e(s)])]),n("p",null,[n("a",m,[a("huskyä½¿ç”¨æ€»ç»“"),e(s)])]),n("p",null,[n("a",h,[a("lint-staged"),e(s)])])])])}const q=t(p,[["render",v],["__file","Git-é’©å­æ‹¦æˆªé…ç½®.html.vue"]]);export{q as default};
