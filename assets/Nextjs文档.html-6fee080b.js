import{_ as p,M as o,p as c,q as l,R as n,t as s,N as t,a1 as e}from"./framework-8fa3e4ce.js";const i={},u={id:"nextjs-æ–‡æ¡£",tabindex:"-1"},r=n("a",{class:"header-anchor",href:"#nextjs-æ–‡æ¡£","aria-hidden":"true"},"#",-1),k={href:"https://www.nextjs.cn/",target:"_blank",rel:"noopener noreferrer"},d=e('<h2 id="æ¸²æŸ“æµç¨‹" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“æµç¨‹" aria-hidden="true">#</a> æ¸²æŸ“æµç¨‹</h2><h3 id="å®¢æˆ·ç«¯è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯è¯·æ±‚" aria-hidden="true">#</a> å®¢æˆ·ç«¯è¯·æ±‚</h3><ol><li>å¼€å§‹</li><li>æµè§ˆå™¨å‘èµ·/pageè¯·æ±‚</li><li>koaæ¥æ”¶åˆ°è¯·æ±‚ï¼Œå¹¶è°ƒç”¨nextjs</li><li>nextjså¼€å§‹æ¸²æŸ“</li><li>è°ƒç”¨appçš„getInitialProps</li><li>è°ƒç”¨é¡µé¢çš„getInitialProps</li><li>æ¸²æŸ“å‡ºæœ€ç»ˆHTML</li><li>è¿”å›ç»™æµè§ˆå™¨ï¼Œæ¸²æŸ“</li><li>ç»“æŸ</li></ol><h3 id="å®¢æˆ·ç«¯è·¯ç”±è·³è½¬" tabindex="-1"><a class="header-anchor" href="#å®¢æˆ·ç«¯è·¯ç”±è·³è½¬" aria-hidden="true">#</a> å®¢æˆ·ç«¯è·¯ç”±è·³è½¬</h3><ol><li>å¼€å§‹</li><li>ç‚¹å‡»é“¾æ¥æŒ‰é’®</li><li>å¼‚æ­¥åŠ è½½é¡µé¢çš„ç»„ä»¶js</li><li>è°ƒç”¨é¡µé¢çš„getInitialProps</li><li>æ•°æ®è¿”å›ï¼Œè·¯ç”±å˜åŒ–</li><li>æ¸²æŸ“æ–°çš„é¡µé¢</li><li>ç»“æŸ</li></ol><h2 id="ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„" aria-hidden="true">#</a> ç›®å½•ç»“æ„</h2><ul><li>ğŸ“.next</li><li>ğŸ“node_modules</li><li>ğŸ“pages åŒ…å«çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªè·¯ç”± <ul><li>ğŸ“„_app.js</li></ul></li><li>ğŸ“„server.js</li></ul>',7),v={id:"é¡µé¢è·³è½¬",tabindex:"-1"},m=n("a",{class:"header-anchor",href:"#é¡µé¢è·³è½¬","aria-hidden":"true"},"#",-1),g={href:"https://nextjs-cn.com/docs/api-reference/next/link",target:"_blank",rel:"noopener noreferrer"},b=e(`<ul><li>link ç»„ä»¶ <ul><li>è¿›è¡Œå‰ç«¯è·¯ç”±è·³è½¬</li><li>è‡ªèº«ä¸æ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œéœ€è¦æŒ‡å®šæ¸²æŸ“å†…å®¹</li><li>ç›‘å¬ä¼ å…¥èŠ‚ç‚¹ onclick äº‹ä»¶</li><li>åªæ¥å—å”¯ä¸€ç»“ç‚¹ï¼Œä¸æ”¯æŒå…„å¼ŸèŠ‚ç‚¹</li></ul></li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&quot;next/link&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About Us</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Home<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Router æ¨¡å—æ‰‹åŠ¨è·³è½¬</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/router&#39;</span>

<span class="token keyword">function</span> <span class="token function">ActiveLink</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children<span class="token punctuation">,</span> href <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">marginRight</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> router<span class="token punctuation">.</span>asPath <span class="token operator">===</span> href <span class="token operator">?</span> <span class="token string">&#39;red&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;black&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>href<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>href<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ActiveLink
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),h={id:"åŠ¨æ€è·¯ç”±",tabindex:"-1"},f=n("a",{class:"header-anchor",href:"#åŠ¨æ€è·¯ç”±","aria-hidden":"true"},"#",-1),x={href:"https://nextjs-cn.com/docs/routing/dynamic-routes",target:"_blank",rel:"noopener noreferrer"},y=e(`<p>nextjsä¸­å®ç°è·¯ç”±çš„ä¿¡æ¯é™„å¸¦ï¼Œåªèƒ½é€šè¿‡queryï¼Œä¸èƒ½ä½¿ç”¨paramsã€‚</p><p>å‘èµ·queryè¯·æ±‚</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// router.push(&#39;/router/dynamic-parameters?id=456&#39;)</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/router/dynamic-parameters&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;12345&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–åŠ¨æ€å‚æ•°</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> withRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/router&#39;</span>
<span class="token keyword">import</span> Comp <span class="token keyword">from</span> <span class="token string">&#39;../components/comp&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> router <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Comp</span></span><span class="token punctuation">&gt;</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/router&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Post</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> pid <span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span>query

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Post: </span><span class="token punctuation">{</span>pid<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Post
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·¯ç”±æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±æ˜ å°„" aria-hidden="true">#</a> è·¯ç”±æ˜ å°„</h2><p>å•é¡µå‰ç«¯æ˜ å°„</p><p>é€šè¿‡ Link æ ‡ç­¾ ä¸Šçš„ as å±æ€§ æ˜ å°„</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">&#39;next/link&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;antd&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">ActiveLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/router/dynamic-parameters?id=666<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>huang<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          åŠ¨æ€æ˜ å°„ æµ‹è¯•
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> ActiveLink
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡Routeræ˜ å°„</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/router/dynamic-parameters&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;12345&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token string">&#39;nihao&#39;</span> <span class="token comment">// åŠ¨æ€æ˜ å°„æµ‹è¯•</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æç¤º: ä¸Šè¿°è·¯ç”±æ˜ å°„æ–¹å¼ ä¼šå¯¼è‡´åœ¨æ˜ å°„é¡µé¢åˆ·æ–°å¯¼è‡´404 é”™è¯¯;</p></blockquote><p>åç«¯æ˜ å°„</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åŒ¹é…æ˜ å°„è·¯ç”±</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/huang/:id&#39;</span><span class="token punctuation">,</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> ctx<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
  <span class="token keyword">await</span> <span class="token function">handle</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>req<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>res<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/router/dynamic-parameters&#39;</span><span class="token punctuation">,</span> <span class="token comment">// æ˜ å°„ç›®æ ‡é¡µé¢</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span>respond <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”è·¯ç”±é¡µé¢éœ€è¦é…ç½® getInitialProps ä¿è¯åç«¯æ˜ å°„ query æ•°æ®åŒæ­¥(ä¸ç„¶ä¼šä¸¢å¤±)</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>DynamicParameters<span class="token punctuation">.</span><span class="token function-variable function">getInitialProps</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> res<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id
  <span class="token keyword">return</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è·¯ç”±å˜åŒ–çš„é’©å­-router-events" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±å˜åŒ–çš„é’©å­-router-events" aria-hidden="true">#</a> è·¯ç”±å˜åŒ–çš„é’©å­ router.events</h2><ul><li><p>routeChangeStart(url, { shallow })</p><ul><li>å½“è·¯ç”±å¼€å§‹æ”¹å˜æ—¶è§¦å‘</li></ul></li><li><p>routeChangeComplete(url, { shallow })</p><ul><li>å½“è·¯ç”±å®Œå…¨æ”¹å˜æ—¶è§¦å‘</li></ul></li><li><p>routeChangeError(err, url, { shallow })</p><ul><li>å½“æ›´æ”¹è·¯ç”±æ—¶å‡ºç°é”™è¯¯æˆ–è·¯ç”±åŠ è½½è¢«å–æ¶ˆæ—¶è§¦å‘</li></ul></li><li><p>beforeHistoryChange(url, { shallow })</p><ul><li>åœ¨æ›´æ”¹æµè§ˆå™¨å†å²è®°å½•ä¹‹å‰è§¦å‘</li></ul></li><li><p>hashChangeStart(url, { shallow })</p><ul><li>å½“å“ˆå¸Œå€¼æ”¹å˜è€Œé¡µé¢ä¸å˜æ—¶è§¦å‘</li></ul></li><li><p>hashChangeComplete(url, { shallow })</p><ul><li>å½“å“ˆå¸Œå·²ç»æ”¹å˜ï¼Œä½†é¡µé¢æ²¡æœ‰æ”¹å˜æ—¶</li></ul></li></ul>`,19),w={href:"https://www.nextjs.cn/docs/api-reference/next/router#routerevents",target:"_blank",rel:"noopener noreferrer"},_={href:"https://github.com/TianYouH/react-nextjs/blob/master/pages/_app.js",target:"_blank",rel:"noopener noreferrer"},j={id:"getinitialprops",tabindex:"-1"},C=n("a",{class:"header-anchor",href:"#getinitialprops","aria-hidden":"true"},"#",-1),q={href:"https://www.nextjs.cn/docs/api-reference/data-fetching/getInitialProps",target:"_blank",rel:"noopener noreferrer"},R=n("p",null,"è·å–æœåŠ¡ç«¯é¢„åŠ è½½æ•°æ®ï¼ŒåŒæ­¥å½“å‰é¡µé¢åˆ·æ–°åqueryæ•°æ®",-1),P=n("p",null,"æ¨èä½¿ç”¨",-1),A=n("ul",null,[n("li",null,"getStaticProps"),n("li",null,[s("getServerSideProps "),n("ul",null,[n("li",null,"è¿™äº›æ–°çš„è·å–æ•°æ®çš„æ–¹æ³•ä½¿ä½ å¯ä»¥åœ¨é™æ€ç”Ÿæˆï¼ˆstatic generationï¼‰å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆserver-side renderingï¼‰ä¹‹é—´è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ é¡µé¢ï¼ˆPagesï¼‰ å’Œ æ•°æ®è·å– æ–‡æ¡£")])])],-1),L=n("h2",{id:"è‡ªå®šä¹‰",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰","aria-hidden":"true"},"#"),s(" è‡ªå®šä¹‰")],-1),I={id:"è‡ªå®šä¹‰app",tabindex:"-1"},N=n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰app","aria-hidden":"true"},"#",-1),S={href:"https://www.nextjs.cn/docs/advanced-features/custom-app",target:"_blank",rel:"noopener noreferrer"},H=e(`<ul><li>å›ºå®šLayout</li><li>ä¿æŒä¸€äº›å…¬ç”¨çš„çŠ¶æ€</li><li>ç»™é¡µé¢ä¼ å…¥ä¸€äº›è‡ªå®šä¹‰æ•°æ®</li><li>è‡ªå®šä¹‰é”™è¯¯å¤„ç†</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;antd/dist/antd.css&#39;</span><span class="token punctuation">;</span> <span class="token comment">// or &#39;antd/dist/antd.less</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;next/router&#39;</span>


<span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> Component<span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleRouteChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> <span class="token punctuation">{</span> shallow <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">App is changing to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
          shallow <span class="token operator">?</span> <span class="token string">&#39;with&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;without&#39;</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> shallow routing</span><span class="token template-punctuation string">\`</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeComplete&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;beforeHistoryChange&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;hashChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
    router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;hashChangeComplete&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>

    <span class="token comment">// If the component is unmounted, unsubscribe</span>
    <span class="token comment">// from the event with the \`off\` method:</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;routeChangeComplete&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;beforeHistoryChange&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;hashChangeStart&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
      router<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;hashChangeComplete&#39;</span><span class="token punctuation">,</span> handleRouteChange<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>pageProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyApp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),B={id:"è‡ªå®šä¹‰document",tabindex:"-1"},E=n("a",{class:"header-anchor",href:"#è‡ªå®šä¹‰document","aria-hidden":"true"},"#",-1),M={href:"https://www.nextjs.cn/docs/advanced-features/custom-document",target:"_blank",rel:"noopener noreferrer"},T=n("ul",null,[n("li",null,"åªæœ‰åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨"),n("li",null,"ç”¨æ¥ä¿®æ”¹æœåŠ¡ç«¯æ¸²æŸ“æ–‡æ¡£å†…å®¹"),n("li",null,"ä¸€èˆ¬ç”¨æ¥é…åˆç¬¬ä¸‰æ–¹css-in-jsæ–¹æ¡ˆ")],-1),V=n("blockquote",null,[n("p",null,[s("ä¸æ¨èåœ¨documentä¸­å®šä¹‰title "),n("code",null,"<title>æˆ‘çš„ App</title>"),s(",å¯ä»¥é€šè¿‡åœ¨é¡µé¢ä¸­ import Head from 'next/head' æ–¹å¼å®šä¹‰;")])],-1),z={id:"ngxt-config-js",tabindex:"-1"},D=n("a",{class:"header-anchor",href:"#ngxt-config-js","aria-hidden":"true"},"#",-1),$={href:"https://www.nextjs.cn/docs/api-reference/next.config.js/introduction",target:"_blank",rel:"noopener noreferrer"},U=n("h2",{id:"nextjs-æ ·å¼å®šä¹‰",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#nextjs-æ ·å¼å®šä¹‰","aria-hidden":"true"},"#"),s(" nextjs æ ·å¼å®šä¹‰")],-1),Y={href:"https://www.npmjs.com/package/styled-jsx",target:"_blank",rel:"noopener noreferrer"},F=e(`<div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> color <span class="token operator">=</span> <span class="token string">&quot;blue&quot;</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        App é¡µé¢ä¿¡æ¯
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">App p 11111</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sp glo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">App span 22222</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* æ­£å¸¸å±€éƒ¨æµ‹è¯• */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">jsx</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{\`
        div {
          color: red;
        }
        p {
          color: \${color};
        }
        .sp {
          color: yellow
        }
      \`}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* å…¨å±€ç‰¹æ€§æµ‹è¯•,å½“è¯¥ç»„ä»¶ç§»é™¤å…¨å±€æ•ˆæœä¹Ÿä¼šå¤±æ•ˆ */</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">jsx</span> <span class="token attr-name">global</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">{\`
        .glo {
          color: green
        }
      \`}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="lazyloading" tabindex="-1"><a class="header-anchor" href="#lazyloading" aria-hidden="true">#</a> LazyLoading</h2><ul><li>å¼‚æ­¥åŠ è½½æ¨¡å—</li><li>å¼‚æ­¥åŠ è½½ç»„ä»¶</li></ul><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// å¼‚æ­¥å¼•å…¥ moment ç¤ºä¾‹</span>
App<span class="token punctuation">.</span><span class="token function-variable function">getInitialProps</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;moment&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;é»„é•¿ç”Ÿ&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">time</span><span class="token operator">:</span> moment<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1000</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fromNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function G(J,K){const a=o("ExternalLinkIcon");return c(),l("div",null,[n("h1",u,[r,s(),n("a",k,[s("Nextjs æ–‡æ¡£"),t(a)])]),d,n("h2",v,[m,s(),n("a",g,[s("é¡µé¢è·³è½¬"),t(a)])]),b,n("h2",h,[f,s(),n("a",x,[s("åŠ¨æ€è·¯ç”±"),t(a)])]),y,n("p",null,[n("a",w,[s("ä½¿ç”¨ç¤ºä¾‹-1"),t(a)]),n("a",_,[s("ä½¿ç”¨ç¤ºä¾‹-2"),t(a)])]),n("h2",j,[C,s(),n("a",q,[s("getInitialProps"),t(a)])]),R,P,A,L,n("h3",I,[N,s(),n("a",S,[s("è‡ªå®šä¹‰App"),t(a)])]),H,n("h3",B,[E,s(),n("a",M,[s("è‡ªå®šä¹‰document"),t(a)])]),T,V,n("h3",z,[D,s(),n("a",$,[s("ngxt.config.js"),t(a)])]),U,n("p",null,[s("é»˜è®¤æ”¯æŒ "),n("a",Y,[s("style-jsx"),t(a)])]),F])}const Q=p(i,[["render",G],["__file","Nextjsæ–‡æ¡£.html.vue"]]);export{Q as default};
