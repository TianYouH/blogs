# GithubFlow

Github flow 是Git flow的简化版，专门配合"持续发布"。它是 Github.com 使用的工作流程。

## 流程

它只有一个长期分支，就是master，因此用起来非常简单。

官方推荐的流程如下。

<img :src="$withBase('/image/dev/git/githubFlow.png')" alt="示例">

1. 根据需求，从master拉出新分支，不区分功能分支或补丁分支。

2. 新分支开发完成后，或者需要讨论的时候，就向master发起一个pull request（简称PR）。

3. Pull Request既是一个通知，让别人注意到你的请求，又是一种对话机制，大家一起评审和讨论你的代码。对话过程中，你还可以不断提交代码。

4. 你的Pull Request被接受，合并进master，重新部署后，原来你拉出来的那个分支就被删除。（先部署再合并也可。）

## 评价

Github flow 的最大优点就是简单，对于"持续发布"的产品，可以说是最合适的流程。

问题在于它的假设：master分支的更新与产品的发布是一致的。也就是说，master分支的最新代码，默认就是当前的线上代码。

可是，有些时候并非如此，代码合并进入master分支，并不代表它就能立刻发布。比如，苹果商店的APP提交审核以后，等一段时间才能上架。这时，如果还有新的代码提交，master分支就会与刚发布的版本不一致。另一个例子是，有些公司有发布窗口，只有指定时间才能发布，这也会导致线上版本落后于master分支。

上面这种情况，只有master一个主分支就不够用了。通常，你不得不在master分支以外，另外新建一个production分支跟踪线上版本。
