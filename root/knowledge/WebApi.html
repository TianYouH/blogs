<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebApi | 你好世界</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="这是我的博客">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.cce2827e.js" as="script"><link rel="preload" href="/assets/js/2.c73eb779.js" as="script"><link rel="preload" href="/assets/js/13.b69c17ab.js" as="script"><link rel="prefetch" href="/assets/js/10.6ba2e880.js"><link rel="prefetch" href="/assets/js/11.44b00c43.js"><link rel="prefetch" href="/assets/js/12.a33dd50e.js"><link rel="prefetch" href="/assets/js/14.10d271f1.js"><link rel="prefetch" href="/assets/js/15.45f1133c.js"><link rel="prefetch" href="/assets/js/16.ce2e079b.js"><link rel="prefetch" href="/assets/js/17.e397bac1.js"><link rel="prefetch" href="/assets/js/18.06be0a26.js"><link rel="prefetch" href="/assets/js/19.9d822400.js"><link rel="prefetch" href="/assets/js/20.919d5864.js"><link rel="prefetch" href="/assets/js/21.fed46a02.js"><link rel="prefetch" href="/assets/js/22.2828c1ad.js"><link rel="prefetch" href="/assets/js/23.e89b98cc.js"><link rel="prefetch" href="/assets/js/24.bf1295f8.js"><link rel="prefetch" href="/assets/js/25.c90c86e6.js"><link rel="prefetch" href="/assets/js/26.f1b629eb.js"><link rel="prefetch" href="/assets/js/27.ce3faf58.js"><link rel="prefetch" href="/assets/js/28.3dde07d8.js"><link rel="prefetch" href="/assets/js/3.1b9b5c76.js"><link rel="prefetch" href="/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/assets/js/5.09c2869e.js"><link rel="prefetch" href="/assets/js/6.a4873fcd.js"><link rel="prefetch" href="/assets/js/7.84784c3a.js"><link rel="prefetch" href="/assets/js/8.50d2ae06.js"><link rel="prefetch" href="/assets/js/9.521e146b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">你好世界</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/math/" class="nav-link">
  数学
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/knowledge/" class="nav-link router-link-active">
  知识点
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/math/" class="nav-link">
  数学
</a></div><div class="nav-item"><a href="/webpack/" class="nav-link">
  Webpack
</a></div><div class="nav-item"><a href="/git/" class="nav-link">
  Git
</a></div><div class="nav-item"><a href="/knowledge/" class="nav-link router-link-active">
  知识点
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/knowledge/" aria-current="page" class="sidebar-link">知识点</a></li><li><a href="/knowledge/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/knowledge/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/knowledge/HTTP.html" class="sidebar-link">HTTP</a></li><li><a href="/knowledge/Javascript.html" class="sidebar-link">Javascript</a></li><li><a href="/knowledge/linux命令.html" class="sidebar-link">linux 命令</a></li><li><a href="/knowledge/WebApi.html" aria-current="page" class="active sidebar-link">WebApi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#dom" class="sidebar-link">DOM</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#bom" class="sidebar-link">BOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#navigator-和-screen" class="sidebar-link">navigator 和 screen</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#location-和-history" class="sidebar-link">location 和 history</a></li></ul></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#事件" class="sidebar-link">事件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#事件绑定" class="sidebar-link">事件绑定</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#事件冒泡" class="sidebar-link">事件冒泡</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#事件代理" class="sidebar-link">事件代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#ajax" class="sidebar-link">Ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#xmlhttprequest" class="sidebar-link">XMLHttpRequest</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#fetch-api" class="sidebar-link">Fetch Api</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#第三方-axios-ajax" class="sidebar-link">第三方 axios $.ajax</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#跨域-同源策略，跨域解决方案" class="sidebar-link">跨域:同源策略，跨域解决方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#存储" class="sidebar-link">存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#cookie" class="sidebar-link">cookie</a></li><li class="sidebar-sub-header"><a href="/knowledge/WebApi.html#localstorage和sessionstorage" class="sidebar-link">localStorage和sessionStorage</a></li></ul></li></ul></li><li><a href="/knowledge/安全.html" class="sidebar-link">安全</a></li><li><a href="/knowledge/常用手写函数.html" class="sidebar-link">常用函数代码</a></li><li><a href="/knowledge/初级高频面试题.html" class="sidebar-link">初级高频面试题</a></li><li><a href="/knowledge/性能优化.html" class="sidebar-link">性能优化</a></li><li><a href="/knowledge/运行环境.html" class="sidebar-link">运行环境</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webapi"><a href="#webapi" class="header-anchor">#</a> WebApi</h1> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> DOM</h2> <ol><li>DOM 本质</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>树形结构(DOM树)
特定的XML数据结构
</code></pre></div><ol start="2"><li>DOM 节点操作</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//元素</span>

<span class="token keyword">const</span> divList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>divList<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>divList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//集合</span>
<span class="token keyword">const</span> containerList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;.container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//集合</span>
<span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//集合</span>
</code></pre></div><ol start="3"><li>DOM 结构操作</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;div1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加新节点</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;this is p1&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 添加新创建的元素</span>
div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移动已有节点。注意是移动!!!</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div1<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>DOM 性能</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>DOM操作非常“昂贵”，避免频繁的DOM操作
对DOM查询做缓存
将频繁操作改为一次性操作
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 对DOM查询做缓存</span>

<span class="token comment">// 不缓存DOM查询结果</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//每次循环，都会计算length ，频繁进行DOM查询</span>
<span class="token punctuation">}</span>
<span class="token comment">//缓存DOM查询结果</span>
<span class="token keyword">const</span> pList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> length <span class="token operator">=</span> pList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//缓存length ,只进行一次DOM查询</span>
<span class="token punctuation">}</span>

<span class="token comment">// 将频繁操作改为一次性操作</span>
<span class="token keyword">const</span> listNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建一个文档片段，此时还没有插入到DOM树中</span>
<span class="token keyword">const</span> frag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//执行插入</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> i0<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  li<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;List item &quot;</span> <span class="token operator">+</span> x<span class="token punctuation">;</span>
  frag<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//都完成之后，再插入到DOM树中</span>
listNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>frag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>attr 和 property 的区别</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// property: 修改对象属性，不会体现到html结构中 推荐</span>
<span class="token comment">// attribute: 修改html属性，会改变html结构</span>
<span class="token comment">// 两者都有可能引起DOM重新渲染</span>

<span class="token comment">// property</span>
p1<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;red &quot;</span><span class="token punctuation">;</span>

<span class="token comment">// attribute</span>
p1<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;imooc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;data-name &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="8"><li>一次性插入多个 DOM 节点，考虑性能</li></ol> <h2 id="bom"><a href="#bom" class="header-anchor">#</a> BOM</h2> <h3 id="navigator-和-screen"><a href="#navigator-和-screen" class="header-anchor">#</a> navigator 和 screen</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// navigator</span>
<span class="token keyword">const</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
<span class="token keyword">const</span> isChrome <span class="token operator">=</span> ua<span class="token punctuation">.</span><span class="token function">index0f</span><span class="token punctuation">(</span><span class="token string">&quot;Chrome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isChrome<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// screen</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="location-和-history"><a href="#location-和-history" class="header-anchor">#</a> location 和 history</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//location</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>protocol<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'http: ' 'https: '</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '/learn/199'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// history</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="事件"><a href="#事件" class="header-anchor">#</a> 事件</h2> <h3 id="事件绑定"><a href="#事件绑定" class="header-anchor">#</a> 事件绑定</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;clicked &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="事件冒泡"><a href="#事件冒泡" class="header-anchor">#</a> 事件冒泡</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 基于DOM树形结构</span>
<span class="token comment">// 事件会顺着触发元素网上冒泡</span>
<span class="token comment">// 应用场景∶代理</span>


<span class="token keyword">const</span> p1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
<span class="token function">bindEvent</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 注释掉这一行，来体会事件冒泡</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;激活&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bindEvent</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;取消&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="事件代理"><a href="#事件代理" class="header-anchor">#</a> 事件代理</h3> <div class="language-text extra-class"><pre class="language-text"><code>代码简洁
减少浏览器内存占用
但是，不要滥用
</code></pre></div><h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> Ajax</h2> <h3 id="xmlhttprequest"><a href="#xmlhttprequest" class="header-anchor">#</a> XMLHttpRequest</h3> <ol><li>请求</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// get请求</span>
<span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot; /api&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//这里的函数异步执行，可参考之前JS 基础中的异步模块</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>xhr.readyState</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>0-(未初始化)还没有调用send(方法
1-(载入)已调用send()方法，正在发送请求
2-(载入完成) send()方法执行完成，已经接收到全部响应内容
3-(交互）正在解析响应内容
4-(完成）响应内容解析完成，可以在客户端调用
</code></pre></div><ol start="2"><li>xhr.status</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>2xx–表示成功处理请求，如200
3xx-需要重定向，浏览器直接跳转，如301 302 304
4xx-客户端请求错误，如404 403
5xx-服务器端错误
</code></pre></div><h3 id="fetch-api"><a href="#fetch-api" class="header-anchor">#</a> Fetch Api</h3> <div class="language-text extra-class"><pre class="language-text"><code></code></pre></div><h3 id="第三方-axios-ajax"><a href="#第三方-axios-ajax" class="header-anchor">#</a> 第三方 axios $.ajax</h3> <div class="language-text extra-class"><pre class="language-text"><code></code></pre></div><h3 id="跨域-同源策略，跨域解决方案"><a href="#跨域-同源策略，跨域解决方案" class="header-anchor">#</a> 跨域:同源策略，跨域解决方案</h3> <ol><li>同源策略</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>ajax请求时，浏览器要求当前网页和server 必须同源（安全)
同源: 协议、域名、端口，三者必须一致
前端: http://a.com:8080/; server:https://b.com/api/xxx;

加载图片css js 可无视同源策略
&lt;img src=跨域的图片地址/&gt;
&lt;link href=跨域的css地址/&gt;
&lt;script src=跨域的js地址&gt;&lt;/script&gt;

&lt;img /&gt;可用于统计打点，可使用第三方统计服务
&lt;link /&gt; &lt;script&gt;可使用CDN ，CDN一般都是外域
&lt;script&gt;可实现JSONP
</code></pre></div><ol start="2"><li>跨域</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>所有的跨域，都必须经过server端允许和配合
未经server端允许就实现跨域，说明浏览器有漏洞危险信号
</code></pre></div><ol start="3"><li>JSONP</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>访问https://imooc.com/，服务端一定返回一个html文件吗?
服务器可以任意动态拼接数据返回，只要符合html格式要求
同理于&lt;script src= &quot;https://imooc.com/getData.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;可绕过跨域限制
服务器可以任意动态拼接数据返回
所以，&lt;script&gt;就可以获得跨域的数据，只要服务端愿意返回
</code></pre></div><ol start="3"><li>CORS(服务端支持)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//第二个参数填写允许跨域的域名称,不建议直接写“*&quot;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8011&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;X-Requested-with&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>
  <span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;PUT,POST,GET,DELETE,OPTIONS&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//接收跨域的cookie</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Credentials&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="存储"><a href="#存储" class="header-anchor">#</a> 存储</h2> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> cookie</h3> <div class="language-text extra-class"><pre class="language-text"><code>本身用于浏览器和server通讯
被“借用”到本地存储来
可用document.cpokie =  '.….’来修改

缺点：
存储大小，最大4KB
http 请求时需要发送到服务端，增加请求数据量
只能用document.cookie = '.…’来修改，太过简陋
</code></pre></div><h3 id="localstorage和sessionstorage"><a href="#localstorage和sessionstorage" class="header-anchor">#</a> localStorage和sessionStorage</h3> <div class="language-text extra-class"><pre class="language-text"><code>HTML5专门为存储而设计，最大可存5M
API简单易用setItem getItem
不会随着http请求被发送出去

localStorage数据会永久存储，除非代码或手动删除
sessionStorage数据只存在于当前会话，浏览器关闭则清空
一般用localStorage会更多一些
</code></pre></div><ol><li>描述cookie localStorage sessionStorage区别</li></ol> <div class="language-text extra-class"><pre class="language-text"><code>容量
API易用性
是否跟随 http请求发送出去
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge/linux命令.html" class="prev">
        linux 命令
      </a></span> <span class="next"><a href="/knowledge/安全.html">
        安全
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cce2827e.js" defer></script><script src="/assets/js/2.c73eb779.js" defer></script><script src="/assets/js/13.b69c17ab.js" defer></script>
  </body>
</html>
