<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.59">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><title>Hook | 你好世界</title><meta name="description" content="这是我的博客">
    <link rel="preload" href="/assets/style-3317e074.css" as="style"><link rel="stylesheet" href="/assets/style-3317e074.css">
    <link rel="modulepreload" href="/assets/app-accccac2.js"><link rel="modulepreload" href="/assets/framework-8fa3e4ce.js"><link rel="modulepreload" href="/assets/Hook.html-43b1b726.js"><link rel="modulepreload" href="/assets/Hook.html-990bb4c2.js"><link rel="prefetch" href="/assets/index.html-07db4a5b.js" as="script"><link rel="prefetch" href="/assets/diff.html-5751e74e.js" as="script"><link rel="prefetch" href="/assets/index.html-eda93690.js" as="script"><link rel="prefetch" href="/assets/node连接.html-b5bfba0a.js" as="script"><link rel="prefetch" href="/assets/index.html-668fe261.js" as="script"><link rel="prefetch" href="/assets/基础使用.html-6aff39c1.js" as="script"><link rel="prefetch" href="/assets/index.html-5145a732.js" as="script"><link rel="prefetch" href="/assets/fiddler.html-8907736b.js" as="script"><link rel="prefetch" href="/assets/index.html-5a502f33.js" as="script"><link rel="prefetch" href="/assets/whistle.html-0931e4e6.js" as="script"><link rel="prefetch" href="/assets/Git-钩子拦截配置.html-af737806.js" as="script"><link rel="prefetch" href="/assets/GitFastFarward.html-4784b76f.js" as="script"><link rel="prefetch" href="/assets/gitignore无效解决.html-e05c5ede.js" as="script"><link rel="prefetch" href="/assets/Git规范提交库和Git-Change-log生成库.html-193f7839.js" as="script"><link rel="prefetch" href="/assets/index.html-2760ae3c.js" as="script"><link rel="prefetch" href="/assets/index.html-7bafc474.js" as="script"><link rel="prefetch" href="/assets/个人域名解析跳转GitPage.html-2d4495a5.js" as="script"><link rel="prefetch" href="/assets/同步GitHub和Gitee.html-2ad448da.js" as="script"><link rel="prefetch" href="/assets/index.html-2e2ce4d4.js" as="script"><link rel="prefetch" href="/assets/index.html-50369460.js" as="script"><link rel="prefetch" href="/assets/服务端Mock配置.html-da6aab9f.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-b09a08a8.js" as="script"><link rel="prefetch" href="/assets/HTTPS.html-ebfbe6fe.js" as="script"><link rel="prefetch" href="/assets/HTTP状态码.html-5e88c345.js" as="script"><link rel="prefetch" href="/assets/OSI.html-a50ed30f.js" as="script"><link rel="prefetch" href="/assets/index.html-e0fb48d8.js" as="script"><link rel="prefetch" href="/assets/TCP.html-d7ae8c97.js" as="script"><link rel="prefetch" href="/assets/UDP.html-e85681c8.js" as="script"><link rel="prefetch" href="/assets/Websocket.html-b76e6db3.js" as="script"><link rel="prefetch" href="/assets/域名后缀记录.html-ab50d320.js" as="script"><link rel="prefetch" href="/assets/index.html-65c19420.js" as="script"><link rel="prefetch" href="/assets/Chaijs.html-84d60901.js" as="script"><link rel="prefetch" href="/assets/index.html-c55f1b3b.js" as="script"><link rel="prefetch" href="/assets/index.html-6167e000.js" as="script"><link rel="prefetch" href="/assets/index.html-74d257cd.js" as="script"><link rel="prefetch" href="/assets/index.html-cbe55304.js" as="script"><link rel="prefetch" href="/assets/Python内置函数.html-110d9087.js" as="script"><link rel="prefetch" href="/assets/Python列表.html-74f1df17.js" as="script"><link rel="prefetch" href="/assets/Python基础概念.html-9308f5f1.js" as="script"><link rel="prefetch" href="/assets/Python常用库.html-8a883918.js" as="script"><link rel="prefetch" href="/assets/Python框架scrapy.html-41dc6aab.js" as="script"><link rel="prefetch" href="/assets/Python环境配置.html-09b6f6f1.js" as="script"><link rel="prefetch" href="/assets/index.html-d9afd7ad.js" as="script"><link rel="prefetch" href="/assets/index.html-a4afe9e4.js" as="script"><link rel="prefetch" href="/assets/index.html-51eb84c5.js" as="script"><link rel="prefetch" href="/assets/index.html-32976f86.js" as="script"><link rel="prefetch" href="/assets/业务.html-51d5144c.js" as="script"><link rel="prefetch" href="/assets/初级高频面试题.html-194b7f45.js" as="script"><link rel="prefetch" href="/assets/后端.html-c87df025.js" as="script"><link rel="prefetch" href="/assets/基础.html-3c2b97d7.js" as="script"><link rel="prefetch" href="/assets/工程.html-c44d7adf.js" as="script"><link rel="prefetch" href="/assets/性能.html-a43681d6.js" as="script"><link rel="prefetch" href="/assets/插件.html-1cf9ddf4.js" as="script"><link rel="prefetch" href="/assets/框架.html-8964b904.js" as="script"><link rel="prefetch" href="/assets/系统.html-efdf870a.js" as="script"><link rel="prefetch" href="/assets/网络.html-9085db4d.js" as="script"><link rel="prefetch" href="/assets/语法.html-9af3a9b2.js" as="script"><link rel="prefetch" href="/assets/OAuth授权.html-0c400b7a.js" as="script"><link rel="prefetch" href="/assets/index.html-7af1ad86.js" as="script"><link rel="prefetch" href="/assets/安全.html-0ac1c175.js" as="script"><link rel="prefetch" href="/assets/常用工具函数.html-6f714524.js" as="script"><link rel="prefetch" href="/assets/常用手写函数.html-0cede10d.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-0166089c.js" as="script"><link rel="prefetch" href="/assets/模块加载.html-a3f99cb9.js" as="script"><link rel="prefetch" href="/assets/运行环境.html-76057d6b.js" as="script"><link rel="prefetch" href="/assets/index.html-bde1c5ff.js" as="script"><link rel="prefetch" href="/assets/CodeSplitting.html-7385ce28.js" as="script"><link rel="prefetch" href="/assets/Loader.html-90cc1ab5.js" as="script"><link rel="prefetch" href="/assets/Plugins.html-bdb335de.js" as="script"><link rel="prefetch" href="/assets/index.html-0ac54cd2.js" as="script"><link rel="prefetch" href="/assets/vue-cli.html-9b80545d.js" as="script"><link rel="prefetch" href="/assets/使用Webpack的配置文件.html-85e34cbc.js" as="script"><link rel="prefetch" href="/assets/搭建Webpack环境.html-32c9b159.js" as="script"><link rel="prefetch" href="/assets/index.html-ea3320e4.js" as="script"><link rel="prefetch" href="/assets/yapi.html-37ba77b7.js" as="script"><link rel="prefetch" href="/assets/yapi安装及运维.html-ab56609b.js" as="script"><link rel="prefetch" href="/assets/yapi自动化测试.html-1388df8f.js" as="script"><link rel="prefetch" href="/assets/gitFlow.html-b0e32acb.js" as="script"><link rel="prefetch" href="/assets/GithubFlow.html-1484fdf6.js" as="script"><link rel="prefetch" href="/assets/GitlabFlow.html-c8c8ab8c.js" as="script"><link rel="prefetch" href="/assets/index.html-6f12cee8.js" as="script"><link rel="prefetch" href="/assets/index.html-d986467c.js" as="script"><link rel="prefetch" href="/assets/shell编程.html-c762eee5.js" as="script"><link rel="prefetch" href="/assets/判断和循环.html-d7e18d20.js" as="script"><link rel="prefetch" href="/assets/常用命令.html-eed4cb24.js" as="script"><link rel="prefetch" href="/assets/index.html-f88a6a8f.js" as="script"><link rel="prefetch" href="/assets/动画渐变.html-2e968bda.js" as="script"><link rel="prefetch" href="/assets/响应式.html-405f5b1c.js" as="script"><link rel="prefetch" href="/assets/图文样式.html-6617f35c.js" as="script"><link rel="prefetch" href="/assets/定位.html-c22cabc1.js" as="script"><link rel="prefetch" href="/assets/布局.html-1940ecd0.js" as="script"><link rel="prefetch" href="/assets/index.html-5c6e639d.js" as="script"><link rel="prefetch" href="/assets/常见问题.html-126978ce.js" as="script"><link rel="prefetch" href="/assets/index.html-beb910a8.js" as="script"><link rel="prefetch" href="/assets/作用域和闭包.html-adc83179.js" as="script"><link rel="prefetch" href="/assets/原型到原型链.html-529b7570.js" as="script"><link rel="prefetch" href="/assets/常见问题.html-dc6e5e3f.js" as="script"><link rel="prefetch" href="/assets/继承的多种方式和优缺点.html-42303ba5.js" as="script"><link rel="prefetch" href="/assets/Ajax.html-32e2cfe5.js" as="script"><link rel="prefetch" href="/assets/index.html-d6adbc95.js" as="script"><link rel="prefetch" href="/assets/HOC开发模式.html-25165295.js" as="script"><link rel="prefetch" href="/assets/Nextjs文档.html-29ed863d.js" as="script"><link rel="prefetch" href="/assets/index.html-a8f55039.js" as="script"><link rel="prefetch" href="/assets/Redux.html-2d4359a6.js" as="script"><link rel="prefetch" href="/assets/环境构建.html-4c6783af.js" as="script"><link rel="prefetch" href="/assets/index.html-ff8e9c4b.js" as="script"><link rel="prefetch" href="/assets/VueRouter.html-2812dfc8.js" as="script"><link rel="prefetch" href="/assets/实例方法-事件.html-bb1eb9b5.js" as="script"><link rel="prefetch" href="/assets/实例方法-生命周期.html-94ee222c.js" as="script"><link rel="prefetch" href="/assets/指令.html-228353b6.js" as="script"><link rel="prefetch" href="/assets/模板编译.html-1e24df8f.js" as="script"><link rel="prefetch" href="/assets/渲染和更新.html-d1ae3b7b.js" as="script"><link rel="prefetch" href="/assets/选项-数据.html-7937c3e5.js" as="script"><link rel="prefetch" href="/assets/选项-生命周期钩子.html-121d5d0c.js" as="script"><link rel="prefetch" href="/assets/index.html-c9db8f25.js" as="script"><link rel="prefetch" href="/assets/UML类图.html-87a7dc24.js" as="script"><link rel="prefetch" href="/assets/代理模式.html-e3cc93b8.js" as="script"><link rel="prefetch" href="/assets/其它设计模式.html-c32f21e9.js" as="script"><link rel="prefetch" href="/assets/单例模式.html-3be0775c.js" as="script"><link rel="prefetch" href="/assets/外观模式.html-ee5d267c.js" as="script"><link rel="prefetch" href="/assets/工厂模式.html-9c93294c.js" as="script"><link rel="prefetch" href="/assets/状态模式.html-4e308ab6.js" as="script"><link rel="prefetch" href="/assets/装饰器模式.html-b55ac7cb.js" as="script"><link rel="prefetch" href="/assets/观察者模式.html-161b73e4.js" as="script"><link rel="prefetch" href="/assets/设计原则.html-84a0e2fe.js" as="script"><link rel="prefetch" href="/assets/迭代器模式.html-f0736cbb.js" as="script"><link rel="prefetch" href="/assets/适配器模式.html-03db3016.js" as="script"><link rel="prefetch" href="/assets/面向对象.html-0fd39a22.js" as="script"><link rel="prefetch" href="/assets/面试题分析.html-6c9c5554.js" as="script"><link rel="prefetch" href="/assets/MVC.html-513f3bad.js" as="script"><link rel="prefetch" href="/assets/MVP.html-f968d319.js" as="script"><link rel="prefetch" href="/assets/MVVC.html-ca6e655c.js" as="script"><link rel="prefetch" href="/assets/index.html-cea1540d.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-a999b38d.js" as="script"><link rel="prefetch" href="/assets/diff.html-ca31c44a.js" as="script"><link rel="prefetch" href="/assets/index.html-d835c6a0.js" as="script"><link rel="prefetch" href="/assets/node连接.html-99821ba4.js" as="script"><link rel="prefetch" href="/assets/index.html-6515aa5c.js" as="script"><link rel="prefetch" href="/assets/基础使用.html-6fc00b4a.js" as="script"><link rel="prefetch" href="/assets/index.html-4d2667b7.js" as="script"><link rel="prefetch" href="/assets/fiddler.html-4ddefb2f.js" as="script"><link rel="prefetch" href="/assets/index.html-6df4f1fa.js" as="script"><link rel="prefetch" href="/assets/whistle.html-e2b23a98.js" as="script"><link rel="prefetch" href="/assets/Git-钩子拦截配置.html-6d713a7d.js" as="script"><link rel="prefetch" href="/assets/GitFastFarward.html-809ed595.js" as="script"><link rel="prefetch" href="/assets/gitignore无效解决.html-25d429c4.js" as="script"><link rel="prefetch" href="/assets/Git规范提交库和Git-Change-log生成库.html-e39c342a.js" as="script"><link rel="prefetch" href="/assets/index.html-121d8869.js" as="script"><link rel="prefetch" href="/assets/index.html-043f4abc.js" as="script"><link rel="prefetch" href="/assets/个人域名解析跳转GitPage.html-733b74b4.js" as="script"><link rel="prefetch" href="/assets/同步GitHub和Gitee.html-27205549.js" as="script"><link rel="prefetch" href="/assets/index.html-0ebf891d.js" as="script"><link rel="prefetch" href="/assets/index.html-3aa96ab3.js" as="script"><link rel="prefetch" href="/assets/服务端Mock配置.html-4fad4264.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-df45b658.js" as="script"><link rel="prefetch" href="/assets/HTTPS.html-12bcb952.js" as="script"><link rel="prefetch" href="/assets/HTTP状态码.html-f092f3f9.js" as="script"><link rel="prefetch" href="/assets/OSI.html-74acdb9d.js" as="script"><link rel="prefetch" href="/assets/index.html-2edd4588.js" as="script"><link rel="prefetch" href="/assets/TCP.html-182adaa2.js" as="script"><link rel="prefetch" href="/assets/UDP.html-89c1bd17.js" as="script"><link rel="prefetch" href="/assets/Websocket.html-741e6971.js" as="script"><link rel="prefetch" href="/assets/域名后缀记录.html-6d7e5b78.js" as="script"><link rel="prefetch" href="/assets/index.html-c4c7d365.js" as="script"><link rel="prefetch" href="/assets/Chaijs.html-3183f7d2.js" as="script"><link rel="prefetch" href="/assets/index.html-f617c822.js" as="script"><link rel="prefetch" href="/assets/index.html-e6a8616c.js" as="script"><link rel="prefetch" href="/assets/index.html-9a6bab16.js" as="script"><link rel="prefetch" href="/assets/index.html-8ade8eea.js" as="script"><link rel="prefetch" href="/assets/Python内置函数.html-23b3306a.js" as="script"><link rel="prefetch" href="/assets/Python列表.html-0ec6813a.js" as="script"><link rel="prefetch" href="/assets/Python基础概念.html-46346688.js" as="script"><link rel="prefetch" href="/assets/Python常用库.html-f8a3f685.js" as="script"><link rel="prefetch" href="/assets/Python框架scrapy.html-a9164f96.js" as="script"><link rel="prefetch" href="/assets/Python环境配置.html-5b894e17.js" as="script"><link rel="prefetch" href="/assets/index.html-cc9c65ad.js" as="script"><link rel="prefetch" href="/assets/index.html-f84fed1b.js" as="script"><link rel="prefetch" href="/assets/index.html-ddc8985b.js" as="script"><link rel="prefetch" href="/assets/index.html-a203e53d.js" as="script"><link rel="prefetch" href="/assets/业务.html-b489acc9.js" as="script"><link rel="prefetch" href="/assets/初级高频面试题.html-2ede4290.js" as="script"><link rel="prefetch" href="/assets/后端.html-93ff982d.js" as="script"><link rel="prefetch" href="/assets/基础.html-142faeff.js" as="script"><link rel="prefetch" href="/assets/工程.html-845c8924.js" as="script"><link rel="prefetch" href="/assets/性能.html-47bbae08.js" as="script"><link rel="prefetch" href="/assets/插件.html-3d56e7f7.js" as="script"><link rel="prefetch" href="/assets/框架.html-503d41f1.js" as="script"><link rel="prefetch" href="/assets/系统.html-06a280f0.js" as="script"><link rel="prefetch" href="/assets/网络.html-271c8261.js" as="script"><link rel="prefetch" href="/assets/语法.html-3022fd32.js" as="script"><link rel="prefetch" href="/assets/OAuth授权.html-eab9f1bf.js" as="script"><link rel="prefetch" href="/assets/index.html-d21e610b.js" as="script"><link rel="prefetch" href="/assets/安全.html-5f56ef6b.js" as="script"><link rel="prefetch" href="/assets/常用工具函数.html-cd5f58a5.js" as="script"><link rel="prefetch" href="/assets/常用手写函数.html-3810bc02.js" as="script"><link rel="prefetch" href="/assets/性能优化.html-46d7c85f.js" as="script"><link rel="prefetch" href="/assets/模块加载.html-e944f3a2.js" as="script"><link rel="prefetch" href="/assets/运行环境.html-5e7c5bd0.js" as="script"><link rel="prefetch" href="/assets/index.html-66ce1170.js" as="script"><link rel="prefetch" href="/assets/CodeSplitting.html-be3f6d73.js" as="script"><link rel="prefetch" href="/assets/Loader.html-6855bda9.js" as="script"><link rel="prefetch" href="/assets/Plugins.html-70a06a50.js" as="script"><link rel="prefetch" href="/assets/index.html-c21c3560.js" as="script"><link rel="prefetch" href="/assets/vue-cli.html-7b9b6f6d.js" as="script"><link rel="prefetch" href="/assets/使用Webpack的配置文件.html-8d834e90.js" as="script"><link rel="prefetch" href="/assets/搭建Webpack环境.html-6f218aef.js" as="script"><link rel="prefetch" href="/assets/index.html-8e1374d3.js" as="script"><link rel="prefetch" href="/assets/yapi.html-55e0c0e4.js" as="script"><link rel="prefetch" href="/assets/yapi安装及运维.html-a141dc43.js" as="script"><link rel="prefetch" href="/assets/yapi自动化测试.html-21007395.js" as="script"><link rel="prefetch" href="/assets/gitFlow.html-bafe473d.js" as="script"><link rel="prefetch" href="/assets/GithubFlow.html-e07eeb74.js" as="script"><link rel="prefetch" href="/assets/GitlabFlow.html-2b5aaeee.js" as="script"><link rel="prefetch" href="/assets/index.html-229552dd.js" as="script"><link rel="prefetch" href="/assets/index.html-d3a04b07.js" as="script"><link rel="prefetch" href="/assets/shell编程.html-d113b5f3.js" as="script"><link rel="prefetch" href="/assets/判断和循环.html-a53a8204.js" as="script"><link rel="prefetch" href="/assets/常用命令.html-c5f60bff.js" as="script"><link rel="prefetch" href="/assets/index.html-4a838a17.js" as="script"><link rel="prefetch" href="/assets/动画渐变.html-73f3f349.js" as="script"><link rel="prefetch" href="/assets/响应式.html-badc0206.js" as="script"><link rel="prefetch" href="/assets/图文样式.html-6a7e6387.js" as="script"><link rel="prefetch" href="/assets/定位.html-2469aecd.js" as="script"><link rel="prefetch" href="/assets/布局.html-36e156e0.js" as="script"><link rel="prefetch" href="/assets/index.html-3cfd7ab5.js" as="script"><link rel="prefetch" href="/assets/常见问题.html-f63f3590.js" as="script"><link rel="prefetch" href="/assets/index.html-d0a8bd01.js" as="script"><link rel="prefetch" href="/assets/作用域和闭包.html-c89042ab.js" as="script"><link rel="prefetch" href="/assets/原型到原型链.html-94c4ce3f.js" as="script"><link rel="prefetch" href="/assets/常见问题.html-d7889648.js" as="script"><link rel="prefetch" href="/assets/继承的多种方式和优缺点.html-8805c6c2.js" as="script"><link rel="prefetch" href="/assets/Ajax.html-d529db68.js" as="script"><link rel="prefetch" href="/assets/index.html-603d3670.js" as="script"><link rel="prefetch" href="/assets/HOC开发模式.html-bfa55a57.js" as="script"><link rel="prefetch" href="/assets/Nextjs文档.html-6fee080b.js" as="script"><link rel="prefetch" href="/assets/index.html-323d2414.js" as="script"><link rel="prefetch" href="/assets/Redux.html-f3b13a01.js" as="script"><link rel="prefetch" href="/assets/环境构建.html-d0ccf14e.js" as="script"><link rel="prefetch" href="/assets/index.html-d73ddd9d.js" as="script"><link rel="prefetch" href="/assets/VueRouter.html-85610e5d.js" as="script"><link rel="prefetch" href="/assets/实例方法-事件.html-349d242f.js" as="script"><link rel="prefetch" href="/assets/实例方法-生命周期.html-b88d52a9.js" as="script"><link rel="prefetch" href="/assets/指令.html-7dc9cbbc.js" as="script"><link rel="prefetch" href="/assets/模板编译.html-4256e677.js" as="script"><link rel="prefetch" href="/assets/渲染和更新.html-2505f5f6.js" as="script"><link rel="prefetch" href="/assets/选项-数据.html-27e62248.js" as="script"><link rel="prefetch" href="/assets/选项-生命周期钩子.html-f4309614.js" as="script"><link rel="prefetch" href="/assets/index.html-e2719268.js" as="script"><link rel="prefetch" href="/assets/UML类图.html-a4c86e04.js" as="script"><link rel="prefetch" href="/assets/代理模式.html-1b7dc307.js" as="script"><link rel="prefetch" href="/assets/其它设计模式.html-4db40756.js" as="script"><link rel="prefetch" href="/assets/单例模式.html-9fb2d48b.js" as="script"><link rel="prefetch" href="/assets/外观模式.html-68db8897.js" as="script"><link rel="prefetch" href="/assets/工厂模式.html-21aa55db.js" as="script"><link rel="prefetch" href="/assets/状态模式.html-48054393.js" as="script"><link rel="prefetch" href="/assets/装饰器模式.html-5921da6b.js" as="script"><link rel="prefetch" href="/assets/观察者模式.html-6677e42e.js" as="script"><link rel="prefetch" href="/assets/设计原则.html-894cd070.js" as="script"><link rel="prefetch" href="/assets/迭代器模式.html-c94132d1.js" as="script"><link rel="prefetch" href="/assets/适配器模式.html-9e6bdeae.js" as="script"><link rel="prefetch" href="/assets/面向对象.html-562cf3d5.js" as="script"><link rel="prefetch" href="/assets/面试题分析.html-4bfac9b1.js" as="script"><link rel="prefetch" href="/assets/MVC.html-7b81e3e9.js" as="script"><link rel="prefetch" href="/assets/MVP.html-7c9815c9.js" as="script"><link rel="prefetch" href="/assets/MVVC.html-dadd0305.js" as="script"><link rel="prefetch" href="/assets/index.html-216b4ea3.js" as="script"><link rel="prefetch" href="/assets/404.html-91dc2652.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">你好世界</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/base/" class="" aria-label="入门"><!--[--><!--]--> 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/frame/" class="router-link-active" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/pattern/" class="" aria-label="模式"><!--[--><!--]--> 模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/knowledge/" class="" aria-label="知识点"><!--[--><!--]--> 知识点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/issue/" class="" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="服务"><span class="title">服务</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="服务"><span class="title">服务</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/server/koa/" class="" aria-label="Koa"><!--[--><!--]--> Koa <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/server/java/" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/server/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据"><span class="title">数据</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据"><span class="title">数据</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/data/mongodb/" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/data/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/data/algorithm/" class="" aria-label="Algorithm"><!--[--><!--]--> Algorithm <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="开发"><span class="title">开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/dev/debug/" class="" aria-label="调试"><!--[--><!--]--> 调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/test/" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/git/" class="" aria-label="GIT"><!--[--><!--]--> GIT <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/network/" class="" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/vscode/" class="" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/github/" class="" aria-label="GitHub"><!--[--><!--]--> GitHub <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/mock/" class="" aria-label="Mock"><!--[--><!--]--> Mock <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/web/base/" class="" aria-label="入门"><!--[--><!--]--> 入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/frame/" class="router-link-active" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/webpack/" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/pattern/" class="" aria-label="模式"><!--[--><!--]--> 模式 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/knowledge/" class="" aria-label="知识点"><!--[--><!--]--> 知识点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/web/issue/" class="" aria-label="面试题"><!--[--><!--]--> 面试题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="服务"><span class="title">服务</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="服务"><span class="title">服务</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/server/koa/" class="" aria-label="Koa"><!--[--><!--]--> Koa <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/server/java/" class="" aria-label="Java"><!--[--><!--]--> Java <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/server/python/" class="" aria-label="Python"><!--[--><!--]--> Python <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="数据"><span class="title">数据</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="数据"><span class="title">数据</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/data/mongodb/" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/data/redis/" class="" aria-label="Redis"><!--[--><!--]--> Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/data/algorithm/" class="" aria-label="Algorithm"><!--[--><!--]--> Algorithm <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="开发"><span class="title">开发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="开发"><span class="title">开发</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/dev/debug/" class="" aria-label="调试"><!--[--><!--]--> 调试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/test/" class="" aria-label="测试"><!--[--><!--]--> 测试 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/git/" class="" aria-label="GIT"><!--[--><!--]--> GIT <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/network/" class="" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/linux/" class="" aria-label="Linux"><!--[--><!--]--> Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/vscode/" class="" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/github/" class="" aria-label="GitHub"><!--[--><!--]--> GitHub <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/dev/mock/" class="" aria-label="Mock"><!--[--><!--]--> Mock <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/web/frame/vue/" class="sidebar-item" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E9%80%89%E9%A1%B9-%E6%95%B0%E6%8D%AE.html" class="sidebar-item" aria-label="选项-数据"><!--[--><!--]--> 选项-数据 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90.html" class="sidebar-item" aria-label="选项-生命周期钩子"><!--[--><!--]--> 选项-生命周期钩子 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95-%E4%BA%8B%E4%BB%B6.html" class="sidebar-item" aria-label="实例方法-事件"><!--[--><!--]--> 实例方法-事件 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.html" class="sidebar-item" aria-label="实例方法-生命周期"><!--[--><!--]--> 实例方法-生命周期 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E6%8C%87%E4%BB%A4.html" class="sidebar-item" aria-label="指令"><!--[--><!--]--> 指令 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91.html" class="sidebar-item" aria-label="模板编译"><!--[--><!--]--> 模板编译 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/%E6%B8%B2%E6%9F%93%E5%92%8C%E6%9B%B4%E6%96%B0.html" class="sidebar-item" aria-label="渲染和更新"><!--[--><!--]--> 渲染和更新 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/vue/VueRouter.html" class="sidebar-item" aria-label="VueRouter"><!--[--><!--]--> VueRouter <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">React <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/web/frame/react/" class="router-link-active sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><li><a href="/web/frame/react/%E7%8E%AF%E5%A2%83%E6%9E%84%E5%BB%BA.html" class="sidebar-item" aria-label="环境构建"><!--[--><!--]--> 环境构建 <!--[--><!--]--></a><!----></li><li><a href="/web/frame/react/HOC%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F.html" class="sidebar-item" aria-label="HOC开发模式"><!--[--><!--]--> HOC开发模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/frame/react/Hook.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Hook"><!--[--><!--]--> Hook <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web/frame/react/Hook.html#state-hooks" class="router-link-active router-link-exact-active sidebar-item" aria-label="State-Hooks"><!--[--><!--]--> State-Hooks <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web/frame/react/Hook.html#usestate" class="router-link-active router-link-exact-active sidebar-item" aria-label="useState"><!--[--><!--]--> useState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/frame/react/Hook.html#usereducer" class="router-link-active router-link-exact-active sidebar-item" aria-label="useReducer"><!--[--><!--]--> useReducer <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/web/frame/react/Hook.html#effect" class="router-link-active router-link-exact-active sidebar-item" aria-label="Effect"><!--[--><!--]--> Effect <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web/frame/react/Hook.html#useeffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect"><!--[--><!--]--> useEffect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/frame/react/Hook.html#uselayouteffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="useLayoutEffect"><!--[--><!--]--> useLayoutEffect <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/web/frame/react/Hook.html#usecontext" class="router-link-active router-link-exact-active sidebar-item" aria-label="useContext"><!--[--><!--]--> useContext <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/frame/react/Hook.html#useref" class="router-link-active router-link-exact-active sidebar-item" aria-label="useRef"><!--[--><!--]--> useRef <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web/frame/react/Hook.html#闭包陷阱" class="router-link-active router-link-exact-active sidebar-item" aria-label="闭包陷阱"><!--[--><!--]--> 闭包陷阱 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/web/frame/react/Hook.html#memo" class="router-link-active router-link-exact-active sidebar-item" aria-label="Memo"><!--[--><!--]--> Memo <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/web/frame/react/Redux.html" class="sidebar-item" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><!----></li><li><a href="/web/frame/react/Nextjs%E6%96%87%E6%A1%A3.html" class="sidebar-item" aria-label="Nextjs 文档"><!--[--><!--]--> Nextjs 文档 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="hook" tabindex="-1"><a class="header-anchor" href="#hook" aria-hidden="true">#</a> Hook</h1><p>Hook 是 React 16.8 的新增特性。<br> 它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性（让函数组件具有类组件得能力）。</p><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">class</button></li><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">function</button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyCount</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCount<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item code-group-item__active" aria-selected="true"><!--[--><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyCountFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCountFunc<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h2 id="state-hooks" tabindex="-1"><a class="header-anchor" href="#state-hooks" aria-hidden="true">#</a> State-Hooks</h2><h3 id="usestate" tabindex="-1"><a class="header-anchor" href="#usestate" aria-hidden="true">#</a> useState</h3><p>返回一个 state，以及更新 state 的函数。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 在初始渲染期间，返回的状态 (state) 与传入的第一个参数 (initialState) 值相同。</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// setState 函数用于更新 state。它接收一个新的 state 值并将组件的一次重新渲染加入队列。</span>
<span class="token function">setState</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="函数式更新" tabindex="-1"><a class="header-anchor" href="#函数式更新" aria-hidden="true">#</a> 函数式更新</h4><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// 如果新的 state 需要通过使用先前的 state 计算得出，</span>
<span class="token comment">//  那么可以将函数传递给 setState。该函数将接收先前的 state，并返回一个更新后的值。</span>
<span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="惰性初始-state" tabindex="-1"><a class="header-anchor" href="#惰性初始-state" aria-hidden="true">#</a> 惰性初始 state</h4><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// initialState 参数只会在组件的初始渲染中起作用，后续渲染时会被忽略。</span>
<span class="token comment">// 如果初始 state 需要通过复杂计算获得，则可以传入一个函数，</span>
<span class="token comment">//  在函数中计算并返回初始的 state，此函数只在初始渲染时被调用。</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token function">someExpensiveComputation</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> initialState<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="usereducer" tabindex="-1"><a class="header-anchor" href="#usereducer" aria-hidden="true">#</a> useReducer</h3><p>useState 的替代方案。它接收一个形如 (state, action) =&gt; newState 的 reducer，并返回当前的 state 以及与其配套的 dispatch 方法。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialCount<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><details class="custom-container details"><summary>示例</summary><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;minus&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyCountReducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatchCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">dispatchCount</span><span class="token punctuation">(</span><span class="token string">&quot;minus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCountReducer<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h4 id="惰性初始化" tabindex="-1"><a class="header-anchor" href="#惰性初始化" aria-hidden="true">#</a> 惰性初始化</h4><p>你可以选择惰性地创建初始 state。为此，需要将 init 函数作为 useReducer 的第三个参数传入，这样初始 state 将被设置为 init(initialArg)。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">initialCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> initialCount <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ****************************</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialCount<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="effect" tabindex="-1"><a class="header-anchor" href="#effect" aria-hidden="true">#</a> Effect</h2><h3 id="useeffect" tabindex="-1"><a class="header-anchor" href="#useeffect" aria-hidden="true">#</a> useEffect</h3><p>与 componentDidMount、componentDidUpdate 不同的是，在浏览器完成布局与绘制之后，传给 useEffect 的函数会延迟调用。</p><p>useEffect 会在浏览器绘制后延迟执行，但会保证在任何新的渲染前执行。React 将在组件更新前刷新上一轮渲染的 effect。</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token comment">// useEffect(didUpdate);</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>props<span class="token punctuation">.</span>source<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 参数二 如果不传，每次state更新都会导致effect执行一遍</span>

<span class="token comment">// 条件执行，依赖于第二个参数得传值。</span>

<span class="token comment">// 如果传递一个空数组[]，这就告诉 React 你的 effect 不依赖于 props 或 state 中的任何值，</span>
<span class="token comment">// 所以它永远都不需要重复执行 并且 effect 内部的 props 和 state 就会一直持有其初始值。</span>

<span class="token comment">// 如果传参[count]，将会在count值发生改变时执行一边。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="uselayouteffect" tabindex="-1"><a class="header-anchor" href="#uselayouteffect" aria-hidden="true">#</a> useLayoutEffect</h3><p>其函数签名与 useEffect 相同，但它会在所有的 DOM 变更之后同步调用 effect。可以使用它来读取 DOM 布局并同步触发重渲染。在浏览器执行绘制之前，useLayoutEffect 内部的更新计划将被同步刷新。</p><p>useLayoutEffect 与 componentDidMount、componentDidUpdate 的调用阶段是一样的。</p><p>但是，我们推荐你一开始先用 useEffect，只有当它出问题的时候再尝试使用 useLayoutEffect。</p><blockquote><p>尽可能使用标准的 useEffect 以避免阻塞视觉更新。</p></blockquote><h2 id="usecontext" tabindex="-1"><a class="header-anchor" href="#usecontext" aria-hidden="true">#</a> useContext</h2><p><code>const value = useContext(MyContext);</code></p><p>接收一个 context 对象（React.createContext 的返回值）并返回该 context 的当前值。当前的 context 值由上层组件中距离当前组件最近的 <code>&lt;MyContext.Provider&gt;</code> 的 value prop 决定。</p><p>当组件上层最近的 <code>&lt;MyContext.Provider&gt;</code> 更新时，该 Hook 会触发重渲染，并使用最新传递给 MyContext provider 的 context value 值。即使祖先使用 React.memo 或 shouldComponentUpdate，也会在组件本身使用 useContext 时重新渲染。</p><details class="custom-container details"><summary>示例</summary><ol><li>根目录下创建 lib 目录，在 lib 目录下创建 my-context.js 文件</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// my-context.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>在需要使用得组件的父组件添加 MyContext 组件, 并绑定关联值</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// _app.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyContext <span class="token keyword">from</span> <span class="token string">&quot;../lib/my-context&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&quot;../components/Layout.jsx&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> Component<span class="token punctuation">,</span> pageProps <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>context<span class="token punctuation">,</span> setContext<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Layout<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> o <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        更新 context 测试
      <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>pageProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Layout<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyApp<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>在相关子组件中使用</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> MyContext <span class="token keyword">from</span> <span class="token string">&quot;../../../lib/my-context&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyCountContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCountContext<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="useref" tabindex="-1"><a class="header-anchor" href="#useref" aria-hidden="true">#</a> useRef</h2><p><code>const refContainer = useRef(initialValue);</code></p><p>useRef 返回一个可变的 ref 对象，其 .current 属性被初始化为传入的参数（initialValue）。返回的 ref 对象在组件的整个生命周期内保持不变。</p><details class="custom-container details"><summary>示例</summary><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">MyCountRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> refButton <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useRef refButton:&quot;</span><span class="token punctuation">,</span> refButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>refButton<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="闭包陷阱" tabindex="-1"><a class="header-anchor" href="#闭包陷阱" aria-hidden="true">#</a> 闭包陷阱</h3><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useReducer<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;minus&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyCountEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatchCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> refButton <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> refCount <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  refCount<span class="token punctuation">.</span>current <span class="token operator">=</span> count<span class="token punctuation">;</span>

  <span class="token comment">// const handleBBTest = () =&gt; {</span>
  <span class="token comment">//   setTimeout(() =&gt; {</span>
  <span class="token comment">//     // 这里会有闭包陷阱</span>
  <span class="token comment">//     alert(count)</span>
  <span class="token comment">//   }, 2000);</span>
  <span class="token comment">// }</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleBBTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过使用 ref解决闭包陷阱</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>refCount<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useRef refButton:&quot;</span><span class="token punctuation">,</span> refButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;useEffect end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>refButton<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatchCount</span><span class="token punctuation">(</span><span class="token string">&quot;minus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleBBTest<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">测试闭包</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCountEffect<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="memo" tabindex="-1"><a class="header-anchor" href="#memo" aria-hidden="true">#</a> Memo</h2><p>用于重复绘制性能优化 包含 memo useMemo useCallback</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useReducer<span class="token punctuation">,</span> memo<span class="token punctuation">,</span> useMemo<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">countReducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&quot;add&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token string">&quot;minus&quot;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">MyCountMemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> dispatchCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&quot;huang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 使用 useMemo 声明config, 解决重新声明后内存指向不一样;</span>
  <span class="token comment">// 参数二 是 config 是否重新声明取决于count值是否变化;</span>
  <span class="token comment">// 结果：只要count不变，每次返回得值将是地址相同得对象;</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> count <span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;blue&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>count<span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 使用 useCallback 声明 handleButtonClick，</span>
  <span class="token comment">// 保证 每次MyCountMemo重绘后返回地址一致得函数对象，</span>
  <span class="token keyword">const</span> handleButtonClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatchCount</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// useMemo 也能完成 useCallback 功能</span>
  <span class="token comment">// const handleButtonClick = useMemo(</span>
  <span class="token comment">//   () =&gt; () =&gt; dispatchCount(&#39;add&#39;),</span>
  <span class="token comment">//   [],</span>
  <span class="token comment">// )</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* name 值得变化会引起 MyCountMemo 重新渲染， 
          MyCountMemo 的重新渲染会导致 config 重新被声明，
          config 重新被声明，也会导致Child重绘*/</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setName</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">config</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>config<span class="token punctuation">}</span></span> <span class="token attr-name">onButtonClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Child</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// memo 用于监听 Child props 是否发生变化（变化就更新），返回Boolean</span>
<span class="token comment">// 如果不使用 memo 函数式组件将会因父组件更新而更新</span>
<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onButtonClick<span class="token punctuation">,</span> config <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;child render&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> config<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>config<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyCountMemo<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">最后更新时间: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: huangjinliang@zto.com">DESKTOP-ER5718D\zt</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/web/frame/react/HOC%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F.html" class="" aria-label="HOC开发模式"><!--[--><!--]--> HOC开发模式 <!--[--><!--]--></a></span><span class="next"><a href="/web/frame/react/Redux.html" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-accccac2.js" defer></script>
  </body>
</html>
